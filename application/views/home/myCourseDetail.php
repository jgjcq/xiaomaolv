<?phpdefined('BASEPATH') OR exit('No direct script access allowed');?><!DOCTYPE html><html><head>    <?php    include_once 'public/views/home/header.php';    ?>    <link href="cust/js/videojs/video-js.min.css" rel="stylesheet">    <style type="text/css">        .imgRad{            margin:0 auto;            background: darkcyan;            width:200px;            height:200px;            border:2px solid darkslategray;            border-radius:30px;            text-align: center;            line-height: 200px;        }        .my-course-list-price{            position: relative;            padding-top: 1rem;            box-sizing: border-box;            display: -webkit-box;            display: -webkit-flex;            display: flex;            -webkit-box-pack: justify;            -webkit-justify-content: space-between;            justify-content: space-between;            -webkit-box-align: center;            -webkit-align-items: center;            align-items: center;            padding-top: 3rem;        }        .jdt-container {            width: 10rem;            background-color: #ddd;            border-radius:1.25rem;        }        .skills {            text-align: right;            line-height: 0.5rem;        }        .jd {background-color: #FFBA00; border-radius:1.25rem;}        .item-after:after {            content: '';            position: absolute;            left: 0;            bottom: 0;            right: auto;            top: auto;            height: 1px;            width: 100%;            background-color: #e1e1e1;            display: block;            z-index: 15;            -webkit-transform-origin: 50% 100%;            transform-origin: 50% 100%;        }        .vjs-paused .vjs-big-play-button,        .vjs-paused.vjs-has-started .vjs-big-play-button {            display: block;            left: 50% !important;            top: 50% !important;            margin-left: -1em;            margin-top: -1.3em;        }        .video-js .vjs-big-play-button{            font-size: 2.5em;            line-height: 2.3em;            height: 2.5em;            width: 2.5em;            -webkit-border-radius: 2.5em;            -moz-border-radius: 2.5em;            border-radius: 2.5em;            background-color: #73859f;            background-color: rgba(115,133,159,.5);            border-width: 0.15em;        }        /* 中间的播放箭头 */        .vjs-big-play-button .vjs-icon-placeholder {            font-size: 1.63em;        }        /* 加载圆圈 */        .vjs-loading-spinner {            font-size: 2.5em;            width: 2em;            height: 2em;            border-radius: 1em;            margin-top: -1em;            margin-left: -1.5em;        }        .video-js.vjs-playing .vjs-tech {            pointer-events: auto;        }        .video-js .vjs-time-control{display:block;}        .video-js .vjs-remaining-time{display: none;}    </style></head><body><div class="page-group">    <div class="page page-current">        <!-- 标题栏 -->        <header class="bar bar-nav">            <a class="button button-link button-nav pull-left back" >                <span class="icon icon-left"></span>                返回            </a>            <a class="icon icon-refresh pull-right"></a>            <h1 class="title">我的课程</h1>        </header>        <!-- 工具栏 -->        <nav class="bar bar-tab">            <a class="tab-item external " href="Home">                <span class="icon dh_sy" ></span>                <span class="tab-label">首页</span>            </a>            <a class="tab-item external active" href="Home/myCourse">                <span class="icon dh_wdkc1"></span>                <span class="tab-label">我的课程</span>            </a>            <a class="tab-item external " href="Home/my">                <span class="icon dh_grzx"></span>                <span class="tab-label">个人中心</span>            </a>        </nav>        <!-- 这里是页面内容区 -->        <div class="content" style="padding-top: 0">            <div class="video-main" style="background: #fff">                <video id='my_video' class='video-js' controls preload='auto' style="width: 100%;height: 10rem;"                       poster='<?=$detail_list[0]['thumb']?>' data-setup='{}'  x-webkit-airplay="true" x5-playsinline="true" webkit-playsinline="true" playsinline="true">                    <source src='<?=$detail_list[0]['url']?>' type='video/mp4'>                </video>            </div>            <div  style="background: #fff;padding: .5rem 0 .5rem 1rem;letter-spacing: 1px">                <?=estr($detail,"title")?>            </div>            <div class="card" style="margin-left: 0rem;margin-right: 0rem">                <div class="card-header" style="padding-top: 0.5rem;padding-left: .5rem">                    <div style="text-align: center; display: table;">                        <i class="iconfont icon-shuben011"></i>                        <img width="75%" src="cust/images/课程列表.png" alt="">                        <span style="vertical-align: middle; display: table-cell;padding-left:0.5rem">课程列表</span></div>                </div>                <div class="card-content infinite-scroll infinite-scroll-bottom" data-distance="100">                        <?php                            foreach($detail_list as $info){                        ?>                    <div class="list-block media-list">                        <ul>                            <li class="item-content changeVideo" style="border: unset;padding-left: 15px;padding-right: 15px">                                <div class="item-media" style="margin: unset;width: 8rem;height: 6rem;">                                    <img src="<?=$info['thumb'] ?>" style="width: 8rem;height:6rem;border-radius: 10px">                                </div>                                <div class="item-inner" style="padding-right: unset">                                    <div class="item-title-row">                                        <div class="item-title" >                                            <?=estr($info,"title")?>                                        </div>                                    </div>                                    <div class="item-subtitle my-course-list-price" >                                        <span style="font-size: .7rem;transform: translate(0px, 8px);" class="changeVideo" id="changeVideo<?=estr($info,"id")?>"><?php                                                if(estr($info,'is_over') == 1){                                                    echo "已看完";                                                }else{                                                   echo  "已播放",round($info['now_time']/$info["total_time"]*100),"%";                                                }                                            ?></span>                                        <span class="videoOver" style="display: none">                                            <a class="button button-round button-fill  " >正在播放</a>                                        </span>                                        <a class="button button-round button-fill changeVideoBtn" data-hidid="<?=estr($info,"id")?>"                                           data-now="<?=estr($info,"now_time")?>" data-maxTime="<?=estr($info,"total_time")?>" data-href="<?=estr($info,"url")?>" style="background: #FFBA00">观看</a></div>                                </div>                            </li>                            <li class="item-after">&nbsp;</li>                        </ul>                    </div>                        <?php }?>                </div>            </div>            <div style="width: 100%;text-align: center;letter-spacing: 1px;color: #acacac">                没有更多了~            </div>        </div>        </div>    </div>    <?php    include_once 'public/views/home/script.php';    ?><script type="text/javascript" src="cust/js/videojs/video.min.js"></script><script type="text/javascript">    var myPlayer = videojs("my_video");    var nowPlay = '<?=estr($detail_list[0],"id")?>';    var clearTime ;    myPlayer.ready(function(){        myPlayer.on("play",function () {            if(clearTime)            window.clearInterval(clearTime);            clearTime =window.setInterval(function () {                setHit(nowPlay,myPlayer.currentTime());                console.log(nowPlay+"|"+myPlayer.currentTime());            },3000)        });        myPlayer.on("ended",function () {            window.clearInterval(clearTime);            setHit(nowPlay,-1);        });        myPlayer.on("timeupdate",function () {            if(this.currentTime() <this.duration() ){                var bfb = Math.round(this.currentTime()/this.duration()*100) +"%";                $('#changeVideo'+nowPlay).text("已播放"+bfb);            }else{                $('#changeVideo'+nowPlay).text("已播完");            }        });    })    $('.changeVideo').click(function () {        var btn = $(this).find('.changeVideoBtn');        if($(btn).css('display') == 'none'){            myPlayer.pause();            $(btn).show();            $(btn).parent().find('span.videoOver').show();            $(btn).parent().find('.videoOver').hide();        }else{            var url = $(btn).data("href");            var nowTime = $(btn).data("now");            var maxTime = $(btn).data("maxtime");            nowPlay = $(btn).data("hidid");            myPlayer.src(url);            myPlayer.load();            if(nowTime < maxTime)                myPlayer.currentTime(nowTime);            myPlayer.play();            $(".changeVideoBtn").each(function () {                $(this).show();            });            $(".videoOver").each(function () {                $(this).hide();            });            $(btn).hide();            $(btn).parent().find('span.videoOver').hide();            $(btn).parent().find('.videoOver').show();        }    });    function setHit(id,now){        var url="Home/myCourse/setHit/"+id+"/"+Math.round(now);        $.getJSON(url,function (data) {            console.log(data)        })    }</script></body></html>